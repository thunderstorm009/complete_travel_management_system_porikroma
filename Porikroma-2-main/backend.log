[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------< com.porikroma:porikroma-backend >-------------------
[INFO] Building porikroma-backend 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.2.0:run (default-cli) > test-compile @ porikroma-backend >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ porikroma-backend ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 0 resource from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ porikroma-backend ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ porikroma-backend ---
[INFO] skip non existing resourceDirectory /home/md-huzaifa-islam/work/porikroma/backend/src/test/resources
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ porikroma-backend ---
[INFO] No sources to compile
[INFO] 
[INFO] <<< spring-boot:3.2.0:run (default-cli) < test-compile @ porikroma-backend <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.2.0:run (default-cli) @ porikroma-backend ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.0)

2025-10-08T16:28:40.595+06:00  INFO 72791 --- [           main] com.porikroma.PorikromaApplication       : Starting PorikromaApplication using Java 21.0.4 with PID 72791 (/home/md-huzaifa-islam/work/porikroma/backend/target/classes started by md-huzaifa-islam in /home/md-huzaifa-islam/work/porikroma/backend)
2025-10-08T16:28:40.596+06:00 DEBUG 72791 --- [           main] com.porikroma.PorikromaApplication       : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-08T16:28:40.597+06:00  INFO 72791 --- [           main] com.porikroma.PorikromaApplication       : No active profile set, falling back to 1 default profile: "default"
2025-10-08T16:28:41.858+06:00  INFO 72791 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-10-08T16:28:41.867+06:00  INFO 72791 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-10-08T16:28:41.867+06:00  INFO 72791 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-08T16:28:41.907+06:00  INFO 72791 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-10-08T16:28:41.908+06:00  INFO 72791 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1276 ms
2025-10-08T16:28:42.047+06:00 DEBUG 72791 --- [           main] c.p.security.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-10-08T16:28:42.265+06:00  INFO 72791 --- [           main] c.c.socketio.SocketIOServer              : Session store / pubsub factory used: MemoryStoreFactory (local session store only)
Socket.IO server started on port 9092
2025-10-08T16:28:42.393+06:00  INFO 72791 --- [ntLoopGroup-2-1] c.c.socketio.SocketIOServer              : SocketIO server started at port: 9092
2025-10-08T16:28:42.958+06:00  INFO 72791 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2025-10-08T16:28:43.052+06:00  INFO 72791 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3a588b5f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@20b54cfe, org.springframework.security.web.context.SecurityContextHolderFilter@37b1149b, org.springframework.security.web.header.HeaderWriterFilter@30ec211a, org.springframework.web.filter.CorsFilter@2bdb5e0f, org.springframework.security.web.authentication.logout.LogoutFilter@40faff12, com.porikroma.security.JwtAuthenticationFilter@4087c7fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6fd1ea75, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18e4551, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c9e8a67, org.springframework.security.web.session.SessionManagementFilter@ca546a1, org.springframework.security.web.access.ExceptionTranslationFilter@7af0d91b, org.springframework.security.web.access.intercept.AuthorizationFilter@5409dfdd]
2025-10-08T16:28:43.459+06:00  INFO 72791 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-10-08T16:28:43.471+06:00  INFO 72791 --- [           main] com.porikroma.PorikromaApplication       : Started PorikromaApplication in 3.269 seconds (process running for 3.596)
2025-10-08T16:28:57.456+06:00  INFO 72791 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-08T16:28:57.456+06:00  INFO 72791 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-10-08T16:28:57.460+06:00  INFO 72791 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-10-08T16:28:57.705+06:00  WARN 72791 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/users/me' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-10-08T16:28:57.776+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:28:57.779+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM users WHERE user_id = ? AND is_deleted = FALSE]
2025-10-08T16:28:57.788+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-10-08T16:28:57.792+06:00  INFO 72791 --- [nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-08T16:28:58.168+06:00  INFO 72791 --- [nio-8080-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42781064
2025-10-08T16:28:58.175+06:00  INFO 72791 --- [nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-08T16:28:58.417+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:28:58.417+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM users WHERE user_id = ? AND is_deleted = FALSE]
2025-10-08T16:28:58.417+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-10-08T16:29:01.016+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:29:01.023+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@358447078 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:29:01.027+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@358447078 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:29:01.033+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:29:01.033+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:29:01.055+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:29:01.057+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@358447078 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:29:01.062+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@358447078 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:31:23.193+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAvailableCountries]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:23.193+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAvailableBudgetLevels]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:23.194+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@43025011 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:31:23.194+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1103820694 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:31:23.195+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@43025011 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:31:23.195+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1103820694 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:31:23.198+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing SQL query [SELECT DISTINCT budget_level FROM destinations WHERE budget_level IS NOT NULL ORDER BY budget_level]
2025-10-08T16:31:23.198+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing SQL query [SELECT DISTINCT country FROM destinations WHERE country IS NOT NULL ORDER BY country]
2025-10-08T16:31:23.211+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:23.211+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:23.211+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:23.212+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@43025011 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:31:23.212+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1103820694 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:31:23.212+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1262115984 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:31:23.212+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1262115984 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:31:23.214+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1103820694 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:31:23.214+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@43025011 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:31:23.219+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:23.220+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:31:23.251+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:23.252+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1262115984 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:31:23.254+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1262115984 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:31:34.159+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getDestinationById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:34.161+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@534595335 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:31:34.161+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@534595335 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:31:34.162+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:34.163+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE destination_id = ?]
2025-10-08T16:31:34.169+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getSubDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:34.169+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getTransports]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:34.169+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAccommodations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:34.169+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:34.169+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@534595335 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:31:34.169+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@559505389 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:31:34.169+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2094033335 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:31:34.169+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1264001328 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:31:34.170+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@559505389 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:31:34.170+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1264001328 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:31:34.170+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2094033335 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:31:34.171+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@534595335 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:31:34.171+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:34.171+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:34.171+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM accommodations WHERE destination_id = ? ORDER BY accommodation_name]
2025-10-08T16:31:34.171+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:34.172+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM sub_destinations WHERE destination_id = ? ORDER BY sub_destination_name]
2025-10-08T16:31:34.172+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM transport WHERE destination_id = ? ORDER BY transport_type, operator_name]
2025-10-08T16:31:34.183+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:34.184+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@559505389 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:31:34.184+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:34.184+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:34.184+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2094033335 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:31:34.184+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1264001328 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:31:34.185+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1264001328 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:31:34.185+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2094033335 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:31:34.185+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@559505389 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:31:46.601+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:46.603+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@642489891 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:31:46.603+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@642489891 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:31:46.604+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:46.604+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:31:46.612+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:46.612+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@642489891 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:31:46.613+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@642489891 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:31:48.835+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:48.838+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@606723402 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:31:48.838+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@606723402 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:31:48.839+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:48.839+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:31:48.843+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAvailableBudgetLevels]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:48.843+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAvailableCountries]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:48.844+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@222627134 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:31:48.844+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@222627134 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:31:48.844+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1347417875 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:31:48.845+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1347417875 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:31:48.846+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing SQL query [SELECT DISTINCT budget_level FROM destinations WHERE budget_level IS NOT NULL ORDER BY budget_level]
2025-10-08T16:31:48.846+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing SQL query [SELECT DISTINCT country FROM destinations WHERE country IS NOT NULL ORDER BY country]
2025-10-08T16:31:48.847+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:48.848+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@606723402 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:31:48.849+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:48.849+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:48.849+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1347417875 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:31:48.849+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@222627134 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:31:48.850+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@606723402 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:31:48.850+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1347417875 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:31:48.850+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@222627134 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:31:54.813+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ExpenseService.getUserExpenses]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:54.813+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:31:54.816+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@656250854 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:31:54.816+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1263621185 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:31:54.816+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@656250854 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:31:54.816+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1263621185 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:31:54.818+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:54.818+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:31:54.818+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:31:54.819+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT e.* FROM trip_expenses e
LEFT JOIN expense_settlements es ON e.expense_id = es.expense_id
WHERE e.paid_by_user_id = ? OR es.user_id = ?
ORDER BY e.expense_date DESC
]
2025-10-08T16:31:54.824+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:54.825+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@656250854 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:31:54.827+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@656250854 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:31:54.833+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:31:54.834+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1263621185 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:31:54.836+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1263621185 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:32:04.450+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:32:04.453+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@64070608 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:32:04.454+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@64070608 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:32:04.456+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:32:04.456+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:32:04.460+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:32:04.460+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@64070608 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:32:04.462+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@64070608 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:34:21.429+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:34:21.432+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1266520147 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:34:21.433+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1266520147 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:34:21.434+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:34:21.434+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:34:21.438+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:34:21.438+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1266520147 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:34:21.440+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1266520147 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:39:56.599+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAvailableBudgetLevels]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:39:56.600+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1410974913 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:39:56.600+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1410974913 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:39:56.601+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing SQL query [SELECT DISTINCT budget_level FROM destinations WHERE budget_level IS NOT NULL ORDER BY budget_level]
2025-10-08T16:39:56.601+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAvailableCountries]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:39:56.603+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1265425911 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:39:56.603+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1265425911 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:39:56.605+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:39:56.605+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing SQL query [SELECT DISTINCT country FROM destinations WHERE country IS NOT NULL ORDER BY country]
2025-10-08T16:39:56.607+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:39:56.607+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1410974913 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:39:56.607+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@89998082 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:39:56.608+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@89998082 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:39:56.609+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1410974913 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:39:56.609+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:39:56.610+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:39:56.610+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:39:56.610+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1265425911 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:39:56.611+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1265425911 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:39:56.622+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:39:56.623+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@89998082 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:39:56.626+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@89998082 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:39:59.683+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getDestinationById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:39:59.685+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@696560450 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:39:59.685+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@696560450 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:39:59.685+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAccommodations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:39:59.685+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getTransports]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:39:59.685+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getSubDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:39:59.686+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@290640363 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:39:59.686+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@290640363 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:39:59.686+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:39:59.686+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@523793237 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:39:59.686+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE destination_id = ?]
2025-10-08T16:39:59.687+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@448721294 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:39:59.687+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@523793237 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:39:59.687+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:39:59.687+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@448721294 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:39:59.687+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM accommodations WHERE destination_id = ? ORDER BY accommodation_name]
2025-10-08T16:39:59.688+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:39:59.688+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM sub_destinations WHERE destination_id = ? ORDER BY sub_destination_name]
2025-10-08T16:39:59.688+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:39:59.689+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM transport WHERE destination_id = ? ORDER BY transport_type, operator_name]
2025-10-08T16:39:59.690+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:39:59.691+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@696560450 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:39:59.694+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@696560450 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:39:59.694+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:39:59.695+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@448721294 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:39:59.694+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:39:59.695+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:39:59.695+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@290640363 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:39:59.696+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@523793237 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:39:59.697+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@290640363 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:39:59.697+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@448721294 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:39:59.698+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@523793237 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:40:04.574+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAvailableBudgetLevels]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:40:04.574+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAvailableCountries]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:40:04.575+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:40:04.575+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@682229072 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:40:04.575+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2119017409 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:40:04.575+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@682229072 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:40:04.575+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2119017409 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:40:04.575+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1347953697 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:40:04.576+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:40:04.576+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1347953697 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:40:04.576+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:40:04.576+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing SQL query [SELECT DISTINCT country FROM destinations WHERE country IS NOT NULL ORDER BY country]
2025-10-08T16:40:04.578+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing SQL query [SELECT DISTINCT budget_level FROM destinations WHERE budget_level IS NOT NULL ORDER BY budget_level]
2025-10-08T16:40:04.580+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:40:04.580+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2119017409 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:40:04.581+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:40:04.582+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1347953697 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:40:04.582+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2119017409 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:40:04.583+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1347953697 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:40:04.586+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:40:04.587+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@682229072 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:40:04.589+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@682229072 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:40:14.082+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:40:14.084+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@961891915 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:40:14.084+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@961891915 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:40:14.086+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:40:14.087+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:40:14.096+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:40:14.096+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@961891915 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:40:14.098+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@961891915 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:41:57.616+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:41:57.618+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1728579019 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:41:57.619+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1728579019 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:41:57.620+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:41:57.621+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:41:57.625+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:41:57.626+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1728579019 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:41:57.628+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1728579019 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:42:57.921+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:42:57.923+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@144734140 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:42:57.923+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@144734140 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:42:57.925+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:42:57.925+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:42:57.933+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:42:57.934+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@144734140 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:42:57.936+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@144734140 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:43:02.837+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:43:02.839+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1346504052 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:43:02.839+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1346504052 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:43:02.840+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:43:02.841+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:43:02.847+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:43:02.847+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1346504052 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:43:02.849+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1346504052 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:43:12.962+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getTransports]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:43:12.964+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1482288965 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:43:12.965+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1482288965 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:43:12.968+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:43:12.968+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM transport WHERE destination_id = ? ORDER BY transport_type, operator_name]
2025-10-08T16:43:12.969+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAccommodations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:43:12.970+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1672295800 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:43:12.971+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1672295800 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:43:12.972+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:43:12.972+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM accommodations WHERE destination_id = ? ORDER BY accommodation_name]
2025-10-08T16:43:12.972+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getSubDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:43:12.973+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1937873982 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:43:12.974+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1937873982 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:43:12.975+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:43:12.975+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM sub_destinations WHERE destination_id = ? ORDER BY sub_destination_name]
2025-10-08T16:43:12.976+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:43:12.976+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1482288965 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:43:12.978+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:43:12.978+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1482288965 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:43:12.978+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1672295800 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:43:12.980+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1672295800 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:43:12.981+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:43:12.982+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1937873982 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:43:12.984+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1937873982 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:44:14.535+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getSubDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:14.535+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAccommodations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:14.536+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:14.536+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@531124856 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:44:14.537+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@714527504 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:44:14.537+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@531124856 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:44:14.537+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@714527504 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:44:14.537+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1332222706 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:14.538+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1332222706 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:14.538+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:14.538+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:14.538+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM accommodations WHERE destination_id = ? ORDER BY accommodation_name]
2025-10-08T16:44:14.538+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM sub_destinations WHERE destination_id = ? ORDER BY sub_destination_name]
2025-10-08T16:44:14.539+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:14.539+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getTransports]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:14.539+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:44:14.540+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1826623276 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:44:14.541+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1826623276 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:44:14.542+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:14.542+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM transport WHERE destination_id = ? ORDER BY transport_type, operator_name]
2025-10-08T16:44:14.542+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:14.543+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@531124856 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:44:14.543+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:14.543+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@714527504 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:44:14.544+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:14.544+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1332222706 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:14.545+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@531124856 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:44:14.545+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@714527504 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:44:14.546+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1332222706 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:14.546+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:14.547+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1826623276 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:44:14.549+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1826623276 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:44:29.302+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAccommodations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:29.302+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getTransports]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:29.303+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:29.304+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@185126823 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:44:29.304+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@416118281 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:29.304+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1875494401 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:44:29.304+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@416118281 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:29.304+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@185126823 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:44:29.304+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1875494401 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:44:29.305+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:29.306+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM accommodations WHERE destination_id = ? ORDER BY accommodation_name]
2025-10-08T16:44:29.306+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:29.306+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:29.306+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM transport WHERE destination_id = ? ORDER BY transport_type, operator_name]
2025-10-08T16:44:29.306+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:44:29.306+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getSubDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:29.307+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@773873871 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:44:29.308+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@773873871 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:44:29.309+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:29.310+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:29.310+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@185126823 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:44:29.310+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM sub_destinations WHERE destination_id = ? ORDER BY sub_destination_name]
2025-10-08T16:44:29.311+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:29.312+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@416118281 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:29.312+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@185126823 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:44:29.313+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@416118281 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:29.314+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:29.314+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1875494401 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:44:29.316+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1875494401 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:44:29.318+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:29.318+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@773873871 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:44:29.321+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@773873871 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:44:30.339+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:30.340+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM users
WHERE is_deleted = FALSE
AND (username LIKE ? OR email LIKE ? OR first_name LIKE ? OR last_name LIKE ?)
ORDER BY username
]
2025-10-08T16:44:30.341+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-10-08T16:44:36.750+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:36.751+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM users
WHERE is_deleted = FALSE
AND (username LIKE ? OR email LIKE ? OR first_name LIKE ? OR last_name LIKE ?)
ORDER BY username
]
2025-10-08T16:44:36.751+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-10-08T16:44:36.752+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getTransports]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:36.751+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAllDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:36.753+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@84683983 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:44:36.754+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@84683983 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:44:36.753+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1557957279 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:44:36.755+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1557957279 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:44:36.756+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:36.756+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getSubDestinations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:36.757+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM transport WHERE destination_id = ? ORDER BY transport_type, operator_name]
2025-10-08T16:44:36.757+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@268480655 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:44:36.757+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:36.758+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@268480655 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:44:36.758+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.DestinationService.getAccommodations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:36.758+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1218823206 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:36.758+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM destinations WHERE 1=1 ORDER BY destination_name LIMIT ? OFFSET ?]
2025-10-08T16:44:36.759+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1218823206 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:36.759+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:36.759+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM sub_destinations WHERE destination_id = ? ORDER BY sub_destination_name]
2025-10-08T16:44:36.760+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:36.761+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM accommodations WHERE destination_id = ? ORDER BY accommodation_name]
2025-10-08T16:44:36.761+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:36.762+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@84683983 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:44:36.764+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:36.765+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@268480655 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:44:36.765+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@84683983 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:44:36.767+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@268480655 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:44:36.772+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:36.773+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1557957279 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:44:36.773+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:36.774+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1218823206 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:36.775+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1218823206 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:36.778+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1557957279 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:44:37.552+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.createTrip]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:37.554+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1846984936 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:44:37.554+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1846984936 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:44:37.559+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing SQL update and returning generated keys
2025-10-08T16:44:37.561+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement
2025-10-08T16:44:37.598+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-10-08T16:44:37.599+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [INSERT INTO trip_members (trip_id, user_id, member_role, invitation_status, invited_at)
VALUES (?, ?, ?, ?, ?)
]
2025-10-08T16:44:37.605+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:44:37.607+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:37.607+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT created_by FROM trips WHERE trip_id = ?]
ChatService: Sending message - Welcome to asaa! Start planning your adventure together.
2025-10-08T16:44:37.680+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing SQL update and returning generated keys
2025-10-08T16:44:37.680+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement
2025-10-08T16:44:37.691+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:37.691+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT first_name, last_name, profile_picture_url FROM users WHERE user_id = ?]
ChatService: Message saved with ID 5
ChatService: Calling Socket.IO service to broadcast to trip 3
ChatService: Socket.IO broadcast call completed
2025-10-08T16:44:37.703+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:37.704+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1846984936 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:44:37.710+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1846984936 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:44:37.821+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.addSubDestinationsToTrip]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:37.822+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@459161879 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:44:37.822+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@459161879 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:44:37.829+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:37.829+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:37.842+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-10-08T16:44:37.843+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [INSERT IGNORE INTO trip_subdestinations (trip_id, sub_destination_id, status, created_at) VALUES (?, ?, 'PLANNED', NOW())]
2025-10-08T16:44:37.851+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-10-08T16:44:37.851+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [INSERT IGNORE INTO trip_subdestinations (trip_id, sub_destination_id, status, created_at) VALUES (?, ?, 'PLANNED', NOW())]
2025-10-08T16:44:37.854+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-10-08T16:44:37.854+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [INSERT IGNORE INTO trip_subdestinations (trip_id, sub_destination_id, status, created_at) VALUES (?, ?, 'PLANNED', NOW())]
2025-10-08T16:44:37.856+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:37.857+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@459161879 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:44:37.862+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@459161879 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:44:37.926+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.addAccommodationsToTrip]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:37.928+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1680216532 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:37.929+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1680216532 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:37.930+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:37.930+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:37.934+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-10-08T16:44:37.935+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [INSERT IGNORE INTO trip_accommodations (trip_id, accommodation_id, booking_status, created_at, updated_at) VALUES (?, ?, 'PLANNED', NOW(), NOW())]
2025-10-08T16:44:37.942+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:37.943+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1680216532 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:37.949+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1680216532 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:38.006+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.addTransportsToTrip]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:38.008+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@485264022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:44:38.008+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@485264022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:44:38.010+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.010+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:38.020+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-10-08T16:44:38.020+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [INSERT IGNORE INTO trip_transport (trip_id, transport_id, booking_status, created_at, updated_at) VALUES (?, ?, 'PLANNED', NOW(), NOW())]
2025-10-08T16:44:38.025+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:38.025+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@485264022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:44:38.030+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@485264022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:44:38.091+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.inviteUserToTrip]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:38.091+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1322343882 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:38.091+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1322343882 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:38.094+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.095+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:38.101+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing SQL update and returning generated keys
2025-10-08T16:44:38.101+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement
2025-10-08T16:44:38.112+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.112+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:44:38.117+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.117+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:38.122+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.122+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:44:38.129+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.129+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:44:38.136+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.136+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:44:38.142+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.142+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:44:38.147+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.147+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:44:38.150+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.150+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:44:38.158+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:44:38.158+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.158+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT created_by FROM trips WHERE trip_id = ?]
ChatService: Sending message - null invited a new member to join asaa
2025-10-08T16:44:38.161+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing SQL update and returning generated keys
2025-10-08T16:44:38.161+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement
2025-10-08T16:44:38.165+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.165+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT first_name, last_name, profile_picture_url FROM users WHERE user_id = ?]
ChatService: Message saved with ID 6
ChatService: Calling Socket.IO service to broadcast to trip 3
ChatService: Socket.IO broadcast call completed
2025-10-08T16:44:38.172+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:44:38.177+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing SQL update and returning generated keys
2025-10-08T16:44:38.177+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement
2025-10-08T16:44:38.188+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:38.188+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1322343882 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:38.191+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1322343882 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:38.324+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:38.324+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@835641642 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:38.324+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@835641642 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:38.327+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripMembers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:38.328+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1152232574 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:44:38.328+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1152232574 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:44:38.330+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.330+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.330+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:38.330+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:38.333+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:38.333+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1152232574 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:44:38.333+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:38.333+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@835641642 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:38.334+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1152232574 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:44:38.334+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@835641642 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:38.335+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:38.335+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1312005498 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:38.335+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1312005498 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:38.337+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.337+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:44:38.340+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.340+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:38.344+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.344+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:44:38.347+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.348+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:44:38.351+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.351+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:44:38.356+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.356+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:44:38.361+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.361+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:44:38.364+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:38.364+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:44:38.368+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:38.368+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1312005498 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:38.369+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1312005498 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:55.698+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:55.698+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM users WHERE email = ? AND is_deleted = FALSE]
2025-10-08T16:44:55.699+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-10-08T16:44:56.045+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripMembers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:56.046+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:56.046+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@639102877 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:44:56.046+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@639102877 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:44:56.046+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@339514729 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:56.046+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@339514729 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:56.047+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.047+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.047+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:56.047+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:56.053+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:56.053+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:56.053+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@639102877 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:44:56.054+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@339514729 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:56.055+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@339514729 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:56.055+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@639102877 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:44:56.056+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.hasUserInvitation]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:56.056+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2078351858 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:56.056+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2078351858 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:56.057+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.058+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_invitations WHERE trip_id = ? AND invitee_user_id = ? AND status = 'PENDING']
2025-10-08T16:44:56.064+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:56.065+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2078351858 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:56.067+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2078351858 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:44:56.067+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:44:56.067+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1159877217 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:44:56.067+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1159877217 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:44:56.068+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.068+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:44:56.071+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.071+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:44:56.073+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.073+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:44:56.075+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.076+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:44:56.078+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.078+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:44:56.080+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.080+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:44:56.081+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.081+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:44:56.082+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:44:56.082+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:44:56.084+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:44:56.084+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1159877217 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:44:56.085+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1159877217 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:00.200+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.NotificationService.getUserNotifications]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:00.201+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1368874156 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:00.202+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1368874156 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:00.203+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:00.204+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM user_notifications WHERE user_id = ? ORDER BY created_at DESC]
2025-10-08T16:45:00.210+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:00.210+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1368874156 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:00.212+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1368874156 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:03.622+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:03.622+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM users WHERE user_id = ? AND is_deleted = FALSE]
2025-10-08T16:45:03.622+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-10-08T16:45:03.636+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:03.636+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM users WHERE user_id = ? AND is_deleted = FALSE]
2025-10-08T16:45:03.636+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-10-08T16:45:03.733+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserInvitations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:03.733+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@844215751 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:03.733+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@844215751 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:03.734+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:03.734+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT ti.*, t.trip_name, t.trip_photo_url,
       u1.first_name as inviter_name, u1.profile_picture_url as inviter_profile_picture
FROM trip_invitations ti
JOIN trips t ON ti.trip_id = t.trip_id
JOIN users u1 ON ti.inviter_user_id = u1.user_id
WHERE ti.invitee_user_id = ? AND ti.status = 'PENDING'
ORDER BY ti.invited_at DESC
]
2025-10-08T16:45:03.735+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:03.736+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@844215751 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:03.737+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@844215751 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
DEBUG: acceptInvitation - invitationId: 3, userId: 6
2025-10-08T16:45:07.372+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.respondToInvitation]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:07.373+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2006366611 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:07.373+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2006366611 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
DEBUG: respondToInvitation - invitationId: 3, userId: 6, accept: true
2025-10-08T16:45:07.385+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.385+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_invitations WHERE invitation_id = ?]
DEBUG: Found invitation - inviteeUserId: 6
2025-10-08T16:45:07.391+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-10-08T16:45:07.391+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [UPDATE trip_invitations SET status = ?, responded_at = ? WHERE invitation_id = ?]
2025-10-08T16:45:07.396+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.397+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ? AND user_id = ?]
2025-10-08T16:45:07.402+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-10-08T16:45:07.402+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [INSERT INTO trip_members (trip_id, user_id, member_role, invitation_status, invited_at)
VALUES (?, ?, ?, ?, ?)
]
2025-10-08T16:45:07.407+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.408+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:45:07.412+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.412+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:07.418+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.418+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:45:07.423+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.424+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:45:07.430+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.430+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:45:07.437+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.437+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:45:07.439+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.439+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:45:07.441+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.442+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:45:07.448+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:07.449+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.449+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT created_by FROM trips WHERE trip_id = ?]
ChatService: Sending message - null joined asaa!
2025-10-08T16:45:07.452+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing SQL update and returning generated keys
2025-10-08T16:45:07.452+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement
2025-10-08T16:45:07.456+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.456+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT first_name, last_name, profile_picture_url FROM users WHERE user_id = ?]
ChatService: Message saved with ID 7
ChatService: Calling Socket.IO service to broadcast to trip 3
ChatService: Socket.IO broadcast call completed
2025-10-08T16:45:07.459+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:07.460+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2006366611 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:07.466+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2006366611 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
DEBUG: acceptInvitation completed successfully
2025-10-08T16:45:07.617+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:07.618+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@406768609 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:07.618+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@406768609 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:07.620+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:07.620+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:45:07.626+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:07.626+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@406768609 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:07.628+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@406768609 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:08.501+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getUserTrips]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:08.502+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1011488155 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:08.503+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1011488155 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:08.504+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:08.504+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT DISTINCT t.* FROM trips t
INNER JOIN trip_members tm ON t.trip_id = tm.trip_id
WHERE tm.user_id = ? AND tm.invitation_status = 'ACCEPTED'
ORDER BY t.created_at DESC
]
2025-10-08T16:45:08.508+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:08.508+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1011488155 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:08.510+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1011488155 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:13.580+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:13.583+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1475284932 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:13.583+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1475284932 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:13.585+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.585+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:13.585+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripMembers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:13.586+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1565940149 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:13.586+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1565940149 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:13.587+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.587+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:13.591+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:13.591+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:13.591+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1565940149 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:13.591+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1475284932 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:13.593+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1565940149 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:13.593+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1475284932 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:13.594+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:13.594+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1781749014 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:13.594+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1781749014 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:13.596+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.596+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:45:13.600+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.601+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:13.606+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.607+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:45:13.613+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.613+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:45:13.620+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.620+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:45:13.624+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.624+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:45:13.628+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.628+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:45:13.630+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:13.630+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:45:13.635+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:13.636+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1781749014 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:13.638+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1781749014 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:15.633+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:15.635+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@519987654 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:15.635+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@519987654 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:15.636+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.637+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:15.640+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:15.640+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1022693280 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:15.640+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1022693280 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:15.641+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:15.641+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@519987654 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:15.642+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@519987654 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:15.642+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:15.642+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:15.642+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@558956967 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:15.643+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@558956967 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:15.643+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.643+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:15.643+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.644+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:45:15.646+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:15.646+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1022693280 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:15.646+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.647+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:15.647+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1022693280 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:15.648+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:15.648+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1986571274 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:15.648+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1986571274 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:15.650+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.650+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:15.652+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.652+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:45:15.655+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:15.655+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1986571274 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:15.655+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.655+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:45:15.655+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1986571274 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:15.659+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.659+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:45:15.664+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.664+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:45:15.669+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.670+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:45:15.672+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:15.672+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:45:15.676+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:15.676+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@558956967 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:15.678+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@558956967 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
Client connected: aaf0d8e7-16d8-421f-babe-55e8087a5185
Client connected: e9f005a2-0c50-4ac5-b3f9-b993953738f0
Client connected: e9f005a2-0c50-4ac5-b3f9-b993953738f0
Client e9f005a2-0c50-4ac5-b3f9-b993953738f0 joining trip: 3
2025-10-08T16:45:17.688+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:17.690+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@572979375 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:45:17.690+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@572979375 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:45:17.692+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:17.692+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:17.692+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:17.697+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:17.697+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@572979375 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:45:17.699+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@572979375 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:45:17.699+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:17.700+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@963831091 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:45:17.700+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@963831091 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:45:17.700+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:17.700+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:17.705+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:17.705+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@963831091 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:45:17.706+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@963831091 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:45:19.736+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:19.736+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1487001560 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:19.737+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1487001560 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:19.738+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:19.738+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:19.738+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:19.743+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:19.743+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1487001560 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:19.744+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1487001560 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:19.745+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:19.745+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1482423592 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:19.745+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1482423592 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:19.746+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:19.746+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:19.751+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:19.751+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1482423592 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:19.753+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1482423592 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:21.782+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:21.784+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1189509583 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:21.784+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1189509583 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:21.786+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:21.786+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:21.786+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:21.788+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:21.788+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1189509583 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:21.789+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1189509583 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:21.789+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:21.789+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@63128717 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:21.789+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@63128717 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:21.790+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:21.790+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:21.792+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:21.792+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@63128717 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:21.793+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@63128717 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:23.819+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:23.820+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@913535144 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:23.821+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@913535144 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:23.822+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:23.822+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:23.822+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:23.825+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:23.825+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@913535144 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:23.826+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@913535144 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:23.827+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:23.827+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1589134339 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:23.827+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1589134339 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:23.827+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:23.828+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:23.834+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:23.835+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1589134339 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:23.837+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1589134339 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:25.862+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:25.863+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@34145701 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:25.863+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@34145701 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:25.864+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:25.864+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:25.864+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:25.868+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:25.868+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@34145701 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:25.869+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@34145701 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:25.869+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:25.870+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@690769181 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:25.870+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@690769181 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:25.870+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:25.870+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:25.875+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:25.875+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@690769181 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:25.877+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@690769181 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:27.906+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:27.907+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@9687479 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:27.908+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@9687479 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:27.909+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:27.909+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:27.909+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:27.912+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:27.912+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@9687479 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:27.913+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@9687479 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:27.914+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:27.914+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1498873657 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:27.914+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1498873657 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:27.915+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:27.915+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:27.918+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:27.919+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1498873657 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:27.920+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1498873657 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:29.949+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:29.950+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1886641855 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:29.950+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1886641855 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:29.951+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:29.951+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:29.951+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:29.955+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:29.955+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1886641855 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:29.956+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1886641855 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:29.956+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:29.956+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1156530431 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:29.956+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1156530431 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:29.956+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:29.956+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:29.958+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:29.958+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1156530431 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:29.958+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1156530431 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:31.990+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:31.991+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@401777632 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:45:31.992+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@401777632 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:45:31.993+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:31.993+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:31.993+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:31.999+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:31.999+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@401777632 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:45:32.000+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@401777632 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:45:32.001+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:32.001+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2126224952 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:45:32.001+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2126224952 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:45:32.002+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:32.002+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:32.005+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:32.006+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2126224952 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:45:32.007+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2126224952 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:45:34.035+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:34.035+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@27203735 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:34.035+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@27203735 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:34.036+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:34.036+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:34.036+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:34.046+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:34.046+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@27203735 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:34.047+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@27203735 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:34.048+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:34.048+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1657110706 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:34.048+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1657110706 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:34.049+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:34.049+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:34.052+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:34.052+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1657110706 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:34.054+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1657110706 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:36.081+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:36.082+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@392790936 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:36.083+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@392790936 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:36.085+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:36.085+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:36.085+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:36.090+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:36.090+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@392790936 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:36.091+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@392790936 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:36.091+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:36.092+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2078970584 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:36.092+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2078970584 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:36.092+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:36.093+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:36.095+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:36.095+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2078970584 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:36.096+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2078970584 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:38.129+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:38.130+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1470661934 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:38.130+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1470661934 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:38.131+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:38.131+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:38.131+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:38.134+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:38.134+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1470661934 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:38.134+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1470661934 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:38.135+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:38.135+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1234730242 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:38.135+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1234730242 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:38.135+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:38.136+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:38.138+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:38.138+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1234730242 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:38.139+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1234730242 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:40.179+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:40.182+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1480353605 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:40.182+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1480353605 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:40.184+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:40.184+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:40.184+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:40.187+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:40.187+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1480353605 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:40.189+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1480353605 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:40.189+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:40.191+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@654724849 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:40.191+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@654724849 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:40.192+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:40.192+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:40.194+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:40.194+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@654724849 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:40.196+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@654724849 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:42.226+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:42.228+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1999917437 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:42.228+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1999917437 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:42.229+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:42.229+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:42.229+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:42.232+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:42.232+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1999917437 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:42.234+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1999917437 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:42.235+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:42.235+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1137857046 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:42.235+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1137857046 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:42.236+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:42.236+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:42.238+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:42.239+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1137857046 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:42.240+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1137857046 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:46.309+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:46.310+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1071402217 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:46.311+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1071402217 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:46.312+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:46.312+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.312+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:46.313+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:46.314+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1605103939 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:45:46.314+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1605103939 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:45:46.315+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.315+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:46.316+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:46.316+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1071402217 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:46.317+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1071402217 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:46.318+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:46.318+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@181266001 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:46.318+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@181266001 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:46.318+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:46.318+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1605103939 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:45:46.319+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.319+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:46.320+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1605103939 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:45:46.320+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:46.320+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1562433136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:45:46.320+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1562433136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:45:46.321+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.322+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:45:46.324+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:46.324+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@181266001 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:46.325+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@181266001 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:46.328+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.328+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:46.332+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.332+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:45:46.343+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.343+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:45:46.348+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.348+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:45:46.352+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.352+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:45:46.357+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.357+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:45:46.359+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:46.359+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:45:46.363+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:46.363+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1562433136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:45:46.364+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1562433136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:45:48.353+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:48.354+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@725344785 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:48.354+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@725344785 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:48.356+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:48.356+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:48.356+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:48.361+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:48.361+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@725344785 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:48.362+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@725344785 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:48.362+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:48.363+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1142653714 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:45:48.363+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1142653714 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:45:48.363+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:48.364+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:48.367+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:48.367+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1142653714 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:45:48.368+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1142653714 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:45:50.390+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:50.391+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1499109660 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:50.392+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1499109660 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:50.393+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:50.393+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:50.393+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:50.395+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:50.395+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1499109660 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:50.395+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1499109660 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:50.395+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:50.395+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@930464346 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:50.395+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@930464346 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:50.395+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:50.395+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:50.396+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:50.396+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@930464346 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:50.397+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@930464346 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:52.423+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:52.426+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1128873131 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:45:52.426+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1128873131 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:45:52.428+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:52.428+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:52.428+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:52.431+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:52.431+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1128873131 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:45:52.432+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1128873131 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:45:52.433+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:52.433+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1646456210 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:45:52.433+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1646456210 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:45:52.433+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:52.434+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:52.436+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:52.436+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1646456210 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:45:52.438+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1646456210 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:45:54.465+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:54.466+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@620611657 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:54.466+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@620611657 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:54.467+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:54.468+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:54.468+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:54.470+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:54.470+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@620611657 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:54.471+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@620611657 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:54.472+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:54.472+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1924861769 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:54.472+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1924861769 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:54.473+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:54.473+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:54.477+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:54.477+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1924861769 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:54.478+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1924861769 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:56.512+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:56.513+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1364904788 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:56.514+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1364904788 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:56.515+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:56.515+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:56.515+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:56.519+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:56.519+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1364904788 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:56.521+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1364904788 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:56.521+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:56.521+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@296700007 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:45:56.521+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@296700007 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:45:56.522+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:56.522+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:56.527+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:56.527+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@296700007 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:45:56.529+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@296700007 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:45:58.556+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:58.558+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@707032771 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:58.558+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@707032771 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:58.560+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:45:58.560+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:58.560+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:45:58.564+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:58.564+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@707032771 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:58.565+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@707032771 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:45:58.565+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:45:58.566+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2137421947 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:45:58.566+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2137421947 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:45:58.566+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:45:58.566+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:45:58.569+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:45:58.569+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2137421947 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:45:58.570+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2137421947 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:00.597+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:00.598+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1311920135 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:00.598+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1311920135 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:00.599+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:00.599+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:00.599+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:00.601+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:00.602+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1311920135 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:00.603+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1311920135 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:00.603+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:00.603+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1832833824 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:00.603+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1832833824 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:00.603+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:00.603+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:00.608+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:00.608+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1832833824 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:00.609+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1832833824 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:02.637+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:02.638+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1923081923 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:02.638+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1923081923 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:02.639+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:02.639+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:02.639+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:02.642+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:02.643+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1923081923 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:02.644+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1923081923 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:02.644+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:02.644+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@355028167 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:02.644+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@355028167 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:02.645+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:02.645+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:02.649+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:02.649+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@355028167 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:02.651+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@355028167 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:04.677+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:04.678+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@416844996 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:04.678+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@416844996 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:04.679+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:04.680+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:04.680+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:04.683+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:04.683+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@416844996 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:04.684+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@416844996 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:04.684+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:04.684+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@201823195 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:04.685+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@201823195 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:04.685+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:04.685+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:04.689+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:04.689+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@201823195 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:04.690+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@201823195 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:06.719+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:06.720+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@611328911 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:06.720+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@611328911 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:06.721+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:06.722+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:06.722+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:06.726+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:06.726+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@611328911 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:06.727+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@611328911 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:06.728+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:06.728+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1787140824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:06.728+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1787140824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:06.729+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:06.729+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:06.734+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:06.734+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1787140824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:06.735+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1787140824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:08.759+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:08.761+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2120410685 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:08.762+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2120410685 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:08.763+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:08.763+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:08.763+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:08.766+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:08.766+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2120410685 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:08.768+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2120410685 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:08.768+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:08.768+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1113231593 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:08.768+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1113231593 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:08.769+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:08.769+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:08.771+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:08.771+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1113231593 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:08.772+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1113231593 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:10.802+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:10.804+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1004134948 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:10.805+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1004134948 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:10.807+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:10.807+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:10.807+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:10.810+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:10.810+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1004134948 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:10.811+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1004134948 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:10.811+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:10.811+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@389245003 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:10.811+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@389245003 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:10.812+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:10.812+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:10.814+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:10.814+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@389245003 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:10.815+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@389245003 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:12.864+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:12.867+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@175506759 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:12.868+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@175506759 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:12.870+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:12.870+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:12.870+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:12.876+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:12.876+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@175506759 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:12.877+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@175506759 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:12.878+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:12.878+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1135391640 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:12.878+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1135391640 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:12.879+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:12.879+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:12.885+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:12.885+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1135391640 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:12.886+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1135391640 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:14.941+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:14.944+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1929271758 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:14.945+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1929271758 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:14.947+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:14.947+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:14.947+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:14.951+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:14.951+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1929271758 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:14.952+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1929271758 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:14.953+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:14.953+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@947454297 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:14.953+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@947454297 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:14.954+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:14.954+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:14.956+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:14.957+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@947454297 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:14.957+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@947454297 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:16.987+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:16.989+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1749529236 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:16.989+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1749529236 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:16.991+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:16.991+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:16.992+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:16.995+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:16.995+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1749529236 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:16.997+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1749529236 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:16.997+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:16.997+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1517623473 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:16.997+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1517623473 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:16.998+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:16.998+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:17.001+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:17.001+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1517623473 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:17.001+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1517623473 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:19.032+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:19.034+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1724024642 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:19.034+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1724024642 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:19.036+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:19.037+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:19.037+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:19.041+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:19.041+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1724024642 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:19.043+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1724024642 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:19.043+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:19.043+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1272506518 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:19.043+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1272506518 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:19.044+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:19.044+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:19.047+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:19.047+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1272506518 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:19.048+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1272506518 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:21.086+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:21.087+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1664413540 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:21.087+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1664413540 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:21.088+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:21.088+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:21.089+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:21.092+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:21.093+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1664413540 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:21.094+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1664413540 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:21.094+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:21.095+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1521922026 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:21.095+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1521922026 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:21.095+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:21.095+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:21.100+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:21.100+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1521922026 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:21.101+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1521922026 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:23.130+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:23.132+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1846972963 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:23.132+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1846972963 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:23.133+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:23.133+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:23.133+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:23.137+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:23.137+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1846972963 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:23.139+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1846972963 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:23.139+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:23.140+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1725537161 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:23.140+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1725537161 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:23.140+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:23.141+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:23.145+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:23.145+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1725537161 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:23.146+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1725537161 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:25.175+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:25.177+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2062738617 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:25.177+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2062738617 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:25.179+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:25.179+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:25.179+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:25.183+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:25.183+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2062738617 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:25.184+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2062738617 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:25.184+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:25.184+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@385250723 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:25.184+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@385250723 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:25.184+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:25.184+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:25.186+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:25.187+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@385250723 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:25.187+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@385250723 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:27.219+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:27.222+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@612113921 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:27.222+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@612113921 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:27.224+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:27.224+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:27.224+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:27.228+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:27.228+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@612113921 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:27.229+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@612113921 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:27.230+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:27.230+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1662189758 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:27.230+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1662189758 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:27.231+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:27.231+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:27.234+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:27.234+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1662189758 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:27.235+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1662189758 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:29.265+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:29.266+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@96221443 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:29.266+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@96221443 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:29.267+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:29.267+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:29.267+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:29.273+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:29.273+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@96221443 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:29.274+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@96221443 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:29.275+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:29.275+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1096798800 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:29.275+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1096798800 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:29.276+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:29.276+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:29.279+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:29.279+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1096798800 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:29.280+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1096798800 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:30.318+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:30.319+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@906291520 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:30.320+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@906291520 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:30.322+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:30.322+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.322+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:30.323+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:30.324+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@318393650 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:30.324+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@318393650 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:30.325+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:30.325+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@906291520 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:30.325+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.325+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:30.326+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@906291520 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:30.327+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:30.327+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@90225798 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:30.327+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@90225798 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:30.328+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.328+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:30.331+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:30.331+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@318393650 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:30.331+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:30.331+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@90225798 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:30.332+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@318393650 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:30.332+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@90225798 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:30.332+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:30.332+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1298557051 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:30.332+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1298557051 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:30.333+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.333+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:46:30.338+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.338+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:30.342+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.342+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:46:30.347+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.347+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:46:30.352+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.353+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:46:30.356+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.356+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:46:30.359+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.359+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:46:30.360+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:30.361+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:46:30.365+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:30.366+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1298557051 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:30.367+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1298557051 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:32.363+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:32.365+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1684867608 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:32.365+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1684867608 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:32.367+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:32.367+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:32.367+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:32.371+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:32.371+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1684867608 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:32.372+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1684867608 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:32.373+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:32.373+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@401916778 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:32.373+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@401916778 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:32.374+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:32.374+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:32.377+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:32.377+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@401916778 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:32.378+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@401916778 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:34.412+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:34.413+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1566475735 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:34.413+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1566475735 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:34.414+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:34.414+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:34.414+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:34.418+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:34.418+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1566475735 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:34.419+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1566475735 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:34.420+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:34.420+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@334463961 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:34.420+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@334463961 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:34.421+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:34.421+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:34.426+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:34.426+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@334463961 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:34.427+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@334463961 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:36.457+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:36.458+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1453994763 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:36.458+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1453994763 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:36.459+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:36.459+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:36.459+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:36.462+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:36.462+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1453994763 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:36.463+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1453994763 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:36.463+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:36.463+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1711681640 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:36.463+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1711681640 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:36.464+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:36.464+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:36.475+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:36.475+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1711681640 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:36.477+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1711681640 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:38.504+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:38.506+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@503057046 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:38.506+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@503057046 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:38.508+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:38.508+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:38.508+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:38.513+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:38.514+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@503057046 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:38.515+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@503057046 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:38.515+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:38.515+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@906993062 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:38.515+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@906993062 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:38.516+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:38.516+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:38.518+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:38.519+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@906993062 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:38.519+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@906993062 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:40.556+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:40.557+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1941644825 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:40.557+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1941644825 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:40.558+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:40.559+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:40.559+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:40.563+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:40.564+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1941644825 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:40.565+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1941644825 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:40.565+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:40.565+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1421706990 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:40.565+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1421706990 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:40.566+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:40.566+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:40.569+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:40.569+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1421706990 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:40.570+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1421706990 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
Client disconnected: aaf0d8e7-16d8-421f-babe-55e8087a5185
2025-10-08T16:46:42.601+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:42.603+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2029356116 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:42.603+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2029356116 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:42.604+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:42.604+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:42.604+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:42.607+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:42.607+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2029356116 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:42.607+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2029356116 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:42.608+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:42.608+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1341030693 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:42.608+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1341030693 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:42.609+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:42.609+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:42.611+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:42.611+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1341030693 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:42.612+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1341030693 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:44.647+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:44.648+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1735223392 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:44.648+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1735223392 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:44.649+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:44.649+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:44.649+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:44.655+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:44.655+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1735223392 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:44.656+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1735223392 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:44.657+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:44.657+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@650510923 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:44.657+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@650510923 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:44.658+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:44.658+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:44.661+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:44.661+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@650510923 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:44.662+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@650510923 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:46.694+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:46.695+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2070646599 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:46.695+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2070646599 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:46.696+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:46.697+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:46.697+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:46.700+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:46.700+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2070646599 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:46.702+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2070646599 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:46.703+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:46.703+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2028573685 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:46.703+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2028573685 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:46.704+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:46.704+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:46.709+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:46.709+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2028573685 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:46.710+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2028573685 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:48.740+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:48.742+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@562970632 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:48.742+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@562970632 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:48.743+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:48.744+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:48.744+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:48.747+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:48.747+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@562970632 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:48.748+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@562970632 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:48.749+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:48.749+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@804118365 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:48.749+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@804118365 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:48.750+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:48.750+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:48.752+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:48.753+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@804118365 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:48.754+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@804118365 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:50.780+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:50.782+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@661499498 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:50.782+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@661499498 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:50.782+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:50.782+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:50.782+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:50.785+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:50.786+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@661499498 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:50.787+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@661499498 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:50.787+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:50.787+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@256626255 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:46:50.787+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@256626255 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:46:50.788+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:50.788+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:50.790+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:50.790+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@256626255 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:46:50.790+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@256626255 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:46:52.417+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:52.417+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:52.418+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@615825123 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:52.419+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@615825123 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:52.419+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1262563387 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:52.419+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1262563387 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:52.419+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:52.420+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.420+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:52.420+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.420+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:52.423+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:52.424+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1262563387 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:52.424+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:52.424+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@615825123 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:52.425+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1262563387 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:52.425+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@615825123 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:52.425+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:52.425+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1813731761 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:52.425+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:52.425+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1813731761 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:52.425+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@602819368 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:46:52.425+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@602819368 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:46:52.426+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.426+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:46:52.426+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.426+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:52.428+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.428+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:52.429+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:52.429+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@602819368 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:46:52.430+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@602819368 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:46:52.446+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.446+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:46:52.453+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.453+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:46:52.459+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.460+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:46:52.466+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.466+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:46:52.471+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.471+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:46:52.474+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:52.474+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:46:52.478+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:52.478+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1813731761 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:52.479+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1813731761 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:54.463+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:54.464+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1526461189 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:54.465+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1526461189 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:54.466+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:54.467+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:54.467+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:54.471+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:54.471+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1526461189 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:54.472+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1526461189 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:54.472+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:54.473+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@622379013 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:54.473+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@622379013 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:54.473+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:54.473+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:54.478+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:54.478+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@622379013 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:54.479+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@622379013 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:56.498+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:56.499+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1912713656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:56.499+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1912713656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:56.500+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:56.500+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:56.500+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:56.503+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:56.503+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1912713656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:56.504+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1912713656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:56.505+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:56.505+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@128696681 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:46:56.505+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@128696681 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:46:56.506+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:56.506+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:56.509+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:56.510+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@128696681 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:46:56.511+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@128696681 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:46:58.539+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:58.541+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1177578629 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:58.541+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1177578629 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:58.543+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:46:58.543+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:58.544+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:46:58.548+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:58.548+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1177578629 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:58.549+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1177578629 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:46:58.549+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:46:58.550+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1368755061 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:46:58.550+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1368755061 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:46:58.551+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:46:58.551+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:46:58.554+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:46:58.554+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1368755061 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:46:58.555+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1368755061 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:00.577+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:00.578+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@67743832 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:00.578+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@67743832 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:00.579+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:00.579+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:00.579+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:00.582+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:00.582+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@67743832 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:00.583+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@67743832 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:00.583+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:00.583+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2010562686 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:00.584+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2010562686 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:00.584+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:00.584+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:00.586+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:00.586+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2010562686 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:00.587+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2010562686 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:02.618+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:02.619+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@773508373 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:02.619+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@773508373 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:02.621+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:02.621+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:02.621+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:02.625+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:02.625+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@773508373 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:02.627+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@773508373 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:02.628+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:02.628+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1444360002 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:02.628+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1444360002 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:02.629+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:02.629+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:02.634+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:02.634+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1444360002 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:02.636+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1444360002 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:04.660+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:04.661+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1921206437 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:04.661+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1921206437 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:04.662+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:04.662+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:04.662+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:04.665+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:04.665+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1921206437 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:04.666+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1921206437 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:04.666+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:04.666+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@351242968 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:04.666+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@351242968 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:04.666+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:04.666+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:04.669+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:04.669+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@351242968 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:04.670+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@351242968 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:06.700+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:06.702+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1578655568 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:06.703+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1578655568 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:06.704+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:06.705+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:06.705+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:06.711+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:06.711+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1578655568 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:06.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1578655568 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:06.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:06.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1087646245 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:06.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1087646245 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:06.714+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:06.714+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:06.718+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:06.718+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1087646245 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:06.720+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1087646245 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:08.742+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:08.742+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1584606205 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:08.743+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1584606205 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:08.744+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:08.744+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:08.744+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:08.746+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:08.747+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1584606205 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:08.748+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1584606205 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:08.748+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:08.748+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1309439136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:08.748+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1309439136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:08.749+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:08.749+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:08.750+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:08.750+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1309439136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:08.751+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1309439136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:10.769+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:10.770+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@797317037 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:10.770+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@797317037 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:10.771+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:10.772+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:10.772+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:10.774+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:10.775+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@797317037 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:10.775+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@797317037 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:10.776+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:10.776+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@309127473 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:10.776+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@309127473 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:10.777+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:10.777+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:10.778+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:10.779+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@309127473 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:10.779+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@309127473 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:12.804+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:12.805+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@421770781 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:12.805+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@421770781 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:12.806+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:12.806+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:12.807+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:12.810+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:12.810+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@421770781 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:12.812+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@421770781 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:12.813+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:12.813+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@370659723 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:12.813+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@370659723 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:12.814+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:12.814+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:12.819+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:12.820+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@370659723 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:12.821+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@370659723 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:14.839+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:14.839+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@256517966 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:14.839+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@256517966 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:14.840+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:14.840+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:14.840+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:14.842+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:14.842+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@256517966 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:14.843+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@256517966 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:14.843+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:14.844+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1387022721 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:14.844+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1387022721 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:14.844+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:14.844+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:14.846+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:14.846+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1387022721 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:14.846+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1387022721 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:16.864+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:16.865+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@852805282 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:16.865+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@852805282 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:16.866+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:16.867+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:16.867+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:16.869+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:16.869+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@852805282 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:16.870+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@852805282 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:16.871+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:16.871+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1483969249 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:16.871+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1483969249 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:16.872+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:16.872+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:16.874+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:16.874+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1483969249 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:16.875+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1483969249 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:18.902+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:18.903+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@732247657 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:18.904+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@732247657 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:18.906+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:18.906+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:18.906+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:18.909+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:18.909+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@732247657 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:18.911+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@732247657 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:18.912+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:18.913+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@724639375 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:18.913+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@724639375 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:18.914+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:18.914+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:18.917+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:18.917+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@724639375 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:18.918+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@724639375 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:20.958+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:20.959+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1147706704 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:20.959+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1147706704 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:20.961+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:20.961+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:20.961+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:20.966+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:20.967+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1147706704 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:20.968+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1147706704 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:20.969+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:20.969+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@786665308 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:20.969+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@786665308 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:20.970+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:20.970+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:20.976+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:20.976+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@786665308 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:20.978+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@786665308 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:23.012+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:23.013+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@90571481 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:23.013+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@90571481 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:23.014+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:23.014+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:23.014+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:23.017+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:23.017+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@90571481 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:23.018+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@90571481 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:23.018+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:23.018+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1321495193 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:23.018+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1321495193 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:23.018+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:23.019+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:23.021+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:23.022+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1321495193 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:23.023+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1321495193 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:25.050+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:25.050+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1752744204 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:25.050+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1752744204 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:25.051+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:25.051+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:25.051+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:25.054+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:25.054+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1752744204 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:25.055+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1752744204 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:25.056+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:25.056+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@365488100 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:25.056+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@365488100 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:25.056+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:25.056+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:25.058+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:25.059+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@365488100 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:25.059+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@365488100 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:27.089+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:27.090+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1100194973 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:27.090+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1100194973 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:27.091+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:27.091+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:27.091+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:27.092+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:27.093+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1100194973 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:27.094+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1100194973 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:27.094+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:27.094+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1531290247 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:27.094+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1531290247 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:27.094+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:27.095+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:27.099+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:27.100+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1531290247 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:27.102+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1531290247 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:29.123+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:29.124+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@163557652 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:29.124+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@163557652 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:29.124+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:29.125+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:29.125+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:29.127+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:29.127+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@163557652 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:29.128+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@163557652 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:29.128+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:29.128+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@237336911 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:29.128+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@237336911 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:29.128+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:29.128+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:29.129+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:29.129+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@237336911 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:29.130+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@237336911 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:31.152+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:31.153+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1878081638 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:31.153+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1878081638 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:31.153+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:31.154+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:31.154+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:31.156+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:31.156+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1878081638 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:31.157+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1878081638 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:31.157+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:31.157+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1224241654 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:31.157+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1224241654 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:31.158+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:31.158+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:31.160+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:31.160+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1224241654 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:31.161+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1224241654 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:33.185+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:33.185+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@14526656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:33.185+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@14526656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:33.187+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:33.187+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:33.187+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:33.189+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:33.189+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@14526656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:33.190+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@14526656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:33.190+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:33.190+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@161583656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:33.190+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@161583656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:33.191+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:33.191+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:33.193+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:33.193+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@161583656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:33.194+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@161583656 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:35.214+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:35.215+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@280962935 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:35.215+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@280962935 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:35.216+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:35.216+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:35.216+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:35.218+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:35.218+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@280962935 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:35.218+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@280962935 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:35.219+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:35.219+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2056880742 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:35.219+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2056880742 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:35.219+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:35.219+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:35.222+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:35.223+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2056880742 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:35.223+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2056880742 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:37.241+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:37.242+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1996102246 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:37.242+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1996102246 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:37.243+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:37.243+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:37.243+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:37.245+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:37.245+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1996102246 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:37.246+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1996102246 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:37.246+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:37.246+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1029231545 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:37.246+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1029231545 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:37.247+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:37.247+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:37.248+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:37.248+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1029231545 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:37.249+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1029231545 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:39.267+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:39.268+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1588071394 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:39.268+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1588071394 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:39.269+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:39.269+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:39.269+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:39.272+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:39.272+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1588071394 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:39.273+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1588071394 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:39.274+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:39.274+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@140141322 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:39.274+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@140141322 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:39.275+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:39.275+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:39.277+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:39.277+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@140141322 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:39.277+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@140141322 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:41.300+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:41.301+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1719919782 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:41.302+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1719919782 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:41.303+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:41.303+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:41.303+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:41.306+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:41.306+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1719919782 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:41.307+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1719919782 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:41.308+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:41.308+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1083376371 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:41.308+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1083376371 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:41.308+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:41.308+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:41.311+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:41.311+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1083376371 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:41.312+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1083376371 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:43.332+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:43.333+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@293656530 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:43.333+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@293656530 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:43.334+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:43.334+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:43.334+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:43.335+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:43.336+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@293656530 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:43.336+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@293656530 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:43.336+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:43.337+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1581730380 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:43.337+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1581730380 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:43.337+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:43.337+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:43.339+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:43.339+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1581730380 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:43.339+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1581730380 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:45.362+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:45.363+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1920283160 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:45.364+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1920283160 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:45.364+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:45.365+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:45.365+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:45.366+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:45.367+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1920283160 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:45.367+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1920283160 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:45.367+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:45.368+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@790148684 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:45.368+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@790148684 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:45.368+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:45.368+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:45.370+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:45.370+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@790148684 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:45.371+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@790148684 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:47.392+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:47.393+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@712384281 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:47.393+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@712384281 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:47.394+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:47.394+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:47.394+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:47.396+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:47.397+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@712384281 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:47.397+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@712384281 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:47.398+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:47.398+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@540375767 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:47.398+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@540375767 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:47.398+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:47.398+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:47.400+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:47.400+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@540375767 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:47.401+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@540375767 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:49.416+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:49.416+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1946347898 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:49.416+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1946347898 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:49.417+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:49.417+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:49.417+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:49.419+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:49.419+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1946347898 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:49.419+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1946347898 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:49.420+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:49.420+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1981878213 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:47:49.420+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1981878213 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:47:49.420+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:49.420+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:49.421+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:49.421+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1981878213 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:47:49.422+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1981878213 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:47:51.438+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:51.439+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1459200854 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:51.439+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1459200854 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:51.440+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:51.440+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:51.441+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:51.443+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:51.443+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1459200854 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:51.444+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1459200854 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:51.444+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:51.445+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@356379282 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:51.445+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@356379282 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:51.445+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:51.445+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:51.447+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:51.447+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@356379282 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:51.447+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@356379282 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:53.466+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:53.467+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@135745393 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:53.467+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@135745393 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:53.468+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:53.468+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:53.468+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:53.469+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:53.470+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@135745393 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:53.470+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@135745393 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:53.471+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:53.471+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1169369958 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:53.471+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1169369958 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:53.471+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:53.471+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:53.473+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:53.473+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1169369958 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:53.475+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1169369958 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:55.493+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:55.494+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@943833181 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:55.494+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@943833181 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:55.495+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:55.495+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:55.495+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:55.497+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:55.497+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@943833181 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:55.498+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@943833181 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:55.498+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:55.499+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@152676799 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:47:55.499+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@152676799 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:47:55.499+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:55.499+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:55.500+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:55.500+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@152676799 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:47:55.500+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@152676799 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:47:57.525+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:57.526+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@848329530 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:57.526+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@848329530 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:57.527+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:57.527+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:57.527+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:57.530+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:57.530+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@848329530 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:57.531+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@848329530 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:57.532+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:57.532+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1423506339 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:47:57.532+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1423506339 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:47:57.533+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:57.533+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:57.535+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:57.535+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1423506339 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:47:57.537+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1423506339 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:47:59.558+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:59.558+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2119591936 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:59.558+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2119591936 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:59.559+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:47:59.559+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:59.559+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:47:59.562+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:59.562+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2119591936 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:59.563+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2119591936 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:47:59.563+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:47:59.563+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2040221041 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:47:59.563+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2040221041 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:47:59.563+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:47:59.563+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:47:59.565+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:47:59.566+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2040221041 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:47:59.566+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2040221041 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:01.585+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:01.586+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1221588402 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:01.586+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1221588402 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:01.587+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:01.587+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:01.587+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:01.589+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:01.589+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1221588402 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:01.589+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1221588402 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:01.590+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:01.590+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1790924949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:01.590+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1790924949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:01.590+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:01.590+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:01.592+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:01.592+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1790924949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:01.593+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1790924949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:03.607+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:03.608+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@132604951 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:03.608+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@132604951 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:03.609+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:03.609+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:03.609+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:03.611+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:03.611+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@132604951 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:03.612+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@132604951 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:03.612+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:03.612+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@568165290 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:03.612+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@568165290 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:03.613+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:03.613+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:03.615+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:03.615+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@568165290 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:03.616+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@568165290 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:05.634+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:05.634+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@806029999 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:05.634+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@806029999 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:05.635+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:05.635+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:05.635+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:05.637+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:05.637+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@806029999 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:05.637+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@806029999 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:05.638+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:05.638+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1384741105 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:05.638+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1384741105 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:05.638+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:05.638+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:05.640+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:05.640+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1384741105 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:05.640+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1384741105 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:07.663+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:07.663+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@215031807 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:07.663+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@215031807 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:07.664+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:07.664+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:07.664+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:07.666+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:07.666+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@215031807 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:07.667+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@215031807 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:07.667+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:07.667+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1881287198 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:07.667+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1881287198 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:07.668+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:07.668+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:07.671+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:07.671+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1881287198 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:07.672+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1881287198 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:09.696+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:09.696+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1830038944 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:09.696+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1830038944 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:09.697+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:09.697+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:09.697+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:09.699+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:09.699+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1830038944 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:09.699+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1830038944 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:09.700+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:09.700+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@534623317 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:09.700+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@534623317 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:09.700+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:09.700+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:09.702+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:09.702+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@534623317 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:09.703+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@534623317 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:11.718+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:11.719+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@969631606 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:11.719+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@969631606 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:11.719+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:11.719+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:11.719+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:11.722+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:11.722+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@969631606 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:11.723+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@969631606 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:11.723+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:11.723+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2123939718 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:11.723+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2123939718 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:11.724+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:11.724+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:11.726+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:11.726+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2123939718 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:11.727+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2123939718 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:13.743+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:13.744+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@323276860 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:13.744+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@323276860 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:13.745+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:13.745+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:13.745+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:13.747+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:13.747+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@323276860 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:13.747+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@323276860 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:13.748+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:13.748+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@34286582 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:13.748+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@34286582 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:13.748+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:13.748+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:13.749+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:13.749+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@34286582 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:13.749+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@34286582 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:15.769+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:15.769+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1486247049 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:15.770+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1486247049 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:15.770+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:15.770+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:15.770+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:15.772+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:15.772+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1486247049 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:15.773+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1486247049 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:15.773+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:15.773+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1981415382 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:15.773+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1981415382 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:15.773+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:15.773+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:15.774+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:15.774+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1981415382 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:15.775+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1981415382 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:17.786+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:17.786+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1009429117 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:17.786+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1009429117 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:17.787+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:17.787+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:17.787+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:17.788+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:17.788+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1009429117 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:17.789+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1009429117 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:17.789+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:17.789+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@875569583 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:17.789+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@875569583 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:17.790+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:17.790+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:17.791+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:17.791+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@875569583 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:17.791+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@875569583 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:19.805+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:19.805+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1663775184 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:19.806+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1663775184 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:19.807+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:19.807+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:19.807+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:19.808+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:19.809+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1663775184 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:19.809+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1663775184 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:19.809+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:19.810+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@194048395 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:19.810+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@194048395 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:19.810+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:19.810+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:19.812+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:19.812+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@194048395 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:19.813+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@194048395 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:21.827+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:21.828+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@948747521 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:21.828+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@948747521 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:21.828+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:21.829+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:21.829+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:21.830+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:21.830+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@948747521 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:21.830+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@948747521 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:21.830+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:21.831+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@855606022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:21.831+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@855606022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:21.831+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:21.831+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:21.832+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:21.832+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@855606022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:21.832+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@855606022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:23.850+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:23.851+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1633326008 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:23.851+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1633326008 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:23.853+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:23.853+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:23.853+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:23.855+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:23.855+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1633326008 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:23.856+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1633326008 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:23.856+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:23.856+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2023162917 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:23.856+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2023162917 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:23.856+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:23.856+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:23.858+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:23.859+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2023162917 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:23.859+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2023162917 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:25.880+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:25.881+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1763846067 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:25.881+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1763846067 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:25.882+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:25.882+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:25.883+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:25.885+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:25.885+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1763846067 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:25.886+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1763846067 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:25.886+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:25.886+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2027785719 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:25.886+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2027785719 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:25.886+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:25.886+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:25.888+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:25.888+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2027785719 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:25.889+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2027785719 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:27.911+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:27.911+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1421792462 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:27.911+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1421792462 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:27.912+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:27.912+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:27.912+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:27.915+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:27.915+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1421792462 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:27.916+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1421792462 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:27.916+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:27.916+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@813750354 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:27.916+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@813750354 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:27.916+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:27.916+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:27.918+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:27.918+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@813750354 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:27.919+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@813750354 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:29.941+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:29.942+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@510023125 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:29.942+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@510023125 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:29.942+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:29.942+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:29.942+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:29.945+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:29.945+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@510023125 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:29.946+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@510023125 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:29.946+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:29.947+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1154512272 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:29.947+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1154512272 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:29.947+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:29.947+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:29.949+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:29.949+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1154512272 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:29.949+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1154512272 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:31.968+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:31.968+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1598029907 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:31.968+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1598029907 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:31.969+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:31.969+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:31.969+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:31.971+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:31.971+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1598029907 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:31.972+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1598029907 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:31.972+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:31.972+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@564942851 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:31.972+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@564942851 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:31.972+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:31.972+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:31.973+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:31.973+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@564942851 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:31.973+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@564942851 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:33.988+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:33.989+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1684711717 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:33.989+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1684711717 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:33.990+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:33.991+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:33.991+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:33.992+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:33.992+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1684711717 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:33.993+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1684711717 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:33.993+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:33.993+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@742432572 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:33.993+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@742432572 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:33.994+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:33.994+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:33.995+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:33.995+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@742432572 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:33.995+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@742432572 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:36.013+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:36.013+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@267922651 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:36.013+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@267922651 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:36.014+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:36.014+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:36.014+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:36.016+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:36.016+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@267922651 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:36.017+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@267922651 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:36.017+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:36.017+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1875574535 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:36.017+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1875574535 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:36.017+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:36.017+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:36.018+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:36.018+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1875574535 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:36.019+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1875574535 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:38.034+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:38.035+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@896962284 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:38.035+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@896962284 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:38.036+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:38.036+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:38.036+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:38.038+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:38.038+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@896962284 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:38.039+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@896962284 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:38.039+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:38.039+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@137272549 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:38.039+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@137272549 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:38.040+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:38.040+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:38.042+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:38.042+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@137272549 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:38.043+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@137272549 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:40.062+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:40.063+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@119405330 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:40.063+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@119405330 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:40.064+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:40.064+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:40.064+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:40.066+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:40.066+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@119405330 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:40.067+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@119405330 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:40.067+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:40.067+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@754777829 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:40.067+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@754777829 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:40.068+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:40.068+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:40.071+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:40.071+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@754777829 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:40.072+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@754777829 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:42.090+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:42.091+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@974366541 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:42.091+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@974366541 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:42.092+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:42.092+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:42.092+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:42.094+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:42.094+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@974366541 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:42.095+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@974366541 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:42.095+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:42.095+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@265231824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:42.095+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@265231824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:42.096+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:42.096+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:42.097+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:42.098+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@265231824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:42.099+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@265231824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:44.117+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:44.118+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2071343964 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:44.119+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2071343964 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:44.120+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:44.120+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:44.120+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:44.122+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:44.123+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2071343964 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:44.124+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2071343964 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:44.124+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:44.124+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@951125983 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:44.124+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@951125983 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:44.125+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:44.125+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:44.127+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:44.127+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@951125983 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:44.128+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@951125983 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:46.148+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:46.149+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1595631137 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:46.149+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1595631137 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:46.150+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:46.150+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:46.151+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:46.153+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:46.153+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1595631137 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:46.154+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1595631137 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:46.155+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:46.155+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@371436165 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:46.155+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@371436165 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:46.155+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:46.156+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:46.157+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:46.157+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@371436165 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:46.158+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@371436165 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:48.175+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:48.176+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@609003833 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:48.177+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@609003833 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:48.177+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:48.178+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:48.178+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:48.180+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:48.180+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@609003833 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:48.181+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@609003833 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:48.181+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:48.181+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@484815797 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:48.181+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@484815797 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:48.181+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:48.182+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:48.183+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:48.184+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@484815797 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:48.184+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@484815797 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:50.199+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:50.200+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1212098647 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:50.200+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1212098647 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:50.200+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:50.200+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:50.200+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:50.202+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:50.202+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1212098647 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:50.203+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1212098647 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:50.203+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:50.203+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@910403968 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:50.203+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@910403968 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:50.203+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:50.203+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:50.206+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:50.206+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@910403968 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:50.207+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@910403968 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:52.224+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:52.224+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@168270025 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:52.224+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@168270025 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:52.225+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:52.225+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:52.225+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:52.227+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:52.227+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@168270025 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:52.228+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@168270025 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:52.228+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:52.228+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1949180770 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:52.228+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1949180770 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:52.228+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:52.228+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:52.230+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:52.230+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1949180770 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:52.230+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1949180770 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:54.249+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:54.250+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1412901894 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:54.250+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1412901894 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:54.251+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:54.252+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:54.252+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:54.254+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:54.254+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1412901894 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:54.255+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1412901894 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:54.256+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:54.256+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@124921158 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:54.256+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@124921158 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:54.256+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:54.256+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:54.258+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:54.258+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@124921158 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:54.259+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@124921158 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:56.275+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:56.276+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1666934426 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:56.276+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1666934426 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:56.276+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:56.276+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:56.276+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:56.278+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:56.278+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1666934426 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:56.278+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1666934426 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:56.279+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:56.279+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@886422094 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:48:56.279+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@886422094 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:48:56.279+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:56.279+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:56.280+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:56.281+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@886422094 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:48:56.281+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@886422094 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:48:57.823+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:57.823+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:57.823+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@89318162 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:57.823+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@89318162 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:57.823+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1928635377 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:57.823+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1928635377 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:57.824+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.824+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:57.824+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:57.824+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.824+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:57.826+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:57.826+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@89318162 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:57.826+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:57.827+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1928635377 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:57.827+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@89318162 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:57.827+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:57.827+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1366600296 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:48:57.827+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1366600296 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:48:57.828+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1928635377 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:57.828+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.828+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:57.828+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:57.828+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1578681297 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:48:57.828+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1578681297 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:48:57.828+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.828+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:48:57.830+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:57.830+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1366600296 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:48:57.831+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.831+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:57.831+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1366600296 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:48:57.833+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.833+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:48:57.836+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.836+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:48:57.839+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.839+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:48:57.842+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.842+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:48:57.844+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.844+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:48:57.846+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:57.846+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:48:57.849+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:57.849+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1578681297 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:48:57.850+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1578681297 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:48:59.848+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:59.849+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@960600434 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:59.849+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@960600434 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:59.849+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:48:59.849+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:59.849+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:48:59.852+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:59.852+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@960600434 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:59.853+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@960600434 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:48:59.853+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:48:59.853+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1176931724 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:48:59.853+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1176931724 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:48:59.853+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:48:59.853+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:48:59.855+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:48:59.855+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1176931724 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:48:59.856+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1176931724 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:01.875+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:01.875+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1694651939 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:01.876+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1694651939 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:01.876+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:01.876+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:01.876+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:01.878+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:01.878+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1694651939 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:01.879+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1694651939 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:01.879+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:01.879+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@899089619 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:01.879+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@899089619 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:01.879+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:01.879+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:01.882+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:01.882+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@899089619 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:01.883+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@899089619 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:03.905+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:03.905+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1099043101 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:03.905+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1099043101 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:03.906+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:03.906+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:03.906+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:03.908+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:03.908+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1099043101 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:03.909+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1099043101 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:03.909+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:03.909+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@502561269 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:03.909+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@502561269 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:03.909+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:03.909+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:03.910+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:03.910+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@502561269 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:03.911+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@502561269 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:05.932+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:05.933+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@927464598 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:05.933+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@927464598 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:05.934+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:05.934+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:05.934+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:05.938+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:05.938+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@927464598 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:05.939+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@927464598 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:05.939+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:05.939+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1250343876 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:05.939+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1250343876 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:05.940+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:05.940+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:05.942+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:05.942+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1250343876 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:05.942+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1250343876 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:07.965+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:07.966+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1328777694 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:07.966+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1328777694 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:07.967+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:07.967+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:07.967+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:07.969+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:07.969+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1328777694 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:07.970+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1328777694 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:07.970+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:07.970+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@357918655 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:07.970+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@357918655 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:07.970+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:07.970+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:07.972+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:07.972+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@357918655 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:07.972+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@357918655 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:09.993+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:09.993+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1752875240 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:09.993+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1752875240 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:09.994+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:09.994+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:09.994+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:09.995+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:09.995+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1752875240 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:09.995+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1752875240 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:09.996+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:09.996+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@632688025 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:09.996+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@632688025 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:09.996+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:09.996+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:09.997+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:09.997+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@632688025 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:09.997+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@632688025 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:12.017+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:12.018+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@421943518 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:12.018+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@421943518 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:12.019+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:12.019+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:12.019+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:12.021+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:12.021+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@421943518 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:12.022+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@421943518 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:12.022+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:12.022+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@558587137 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:12.022+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@558587137 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:12.023+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:12.023+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:12.024+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:12.024+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@558587137 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:12.025+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@558587137 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:14.051+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:14.052+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@304511648 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:14.052+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@304511648 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:14.053+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:14.054+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:14.054+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:14.057+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:14.057+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@304511648 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:14.058+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@304511648 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:14.059+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:14.059+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1863723459 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:14.059+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1863723459 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:14.060+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:14.060+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:14.062+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:14.062+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1863723459 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:14.063+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1863723459 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:16.085+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:16.086+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@77808471 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:16.086+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@77808471 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:16.088+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:16.088+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:16.088+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:16.090+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:16.090+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@77808471 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:16.091+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@77808471 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:16.092+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:16.092+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2106186881 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:16.092+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2106186881 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:16.092+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:16.092+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:16.094+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:16.094+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2106186881 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:16.094+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2106186881 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:18.115+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:18.116+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1013339602 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:18.116+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1013339602 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:18.117+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:18.117+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:18.117+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:18.119+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:18.119+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1013339602 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:18.120+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1013339602 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:18.120+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:18.120+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@321488088 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:18.120+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@321488088 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:18.121+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:18.121+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:18.123+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:18.123+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@321488088 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:18.124+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@321488088 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:20.145+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:20.146+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@7610134 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:20.146+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@7610134 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:20.147+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:20.147+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:20.148+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:20.150+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:20.150+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@7610134 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:20.151+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@7610134 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:20.151+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:20.152+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1240867316 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:20.152+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1240867316 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:20.152+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:20.152+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:20.154+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:20.154+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1240867316 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:20.155+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1240867316 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:22.175+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:22.175+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1675330078 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:22.175+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1675330078 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:22.176+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:22.176+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:22.176+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:22.179+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:22.179+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1675330078 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:22.180+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1675330078 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:22.180+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:22.180+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1804517894 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:22.180+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1804517894 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:22.180+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:22.180+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:22.182+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:22.182+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1804517894 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:22.183+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1804517894 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:24.203+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:24.203+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1477816038 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:24.204+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1477816038 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:24.204+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:24.204+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:24.204+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:24.206+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:24.206+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1477816038 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:24.206+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1477816038 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:24.207+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:24.207+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@131805701 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:24.207+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@131805701 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:24.207+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:24.207+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:24.209+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:24.209+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@131805701 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:24.210+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@131805701 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:26.232+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:26.232+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1551405229 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:26.233+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1551405229 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:26.233+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:26.233+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:26.234+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:26.235+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:26.235+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1551405229 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:26.236+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1551405229 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:26.236+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:26.236+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1339216949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:26.236+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1339216949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:26.237+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:26.237+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:26.239+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:26.239+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1339216949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:26.240+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1339216949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:28.264+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:28.264+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@247641673 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:28.264+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@247641673 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:28.265+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:28.265+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:28.265+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:28.268+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:28.268+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@247641673 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:28.269+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@247641673 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:28.269+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:28.269+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1396234159 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:28.269+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1396234159 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:28.270+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:28.270+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:28.271+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:28.271+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1396234159 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:28.272+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1396234159 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:30.292+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:30.292+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@973620002 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:30.292+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@973620002 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:30.293+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:30.293+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:30.293+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:30.294+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:30.294+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@973620002 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:30.295+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@973620002 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:30.295+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:30.295+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@275656286 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:30.295+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@275656286 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:30.296+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:30.296+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:30.298+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:30.299+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@275656286 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:30.300+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@275656286 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:32.320+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:32.321+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1024114284 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:32.321+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1024114284 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:32.322+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:32.322+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:32.322+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:32.323+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:32.323+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1024114284 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:32.324+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1024114284 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:32.324+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:32.324+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1867646848 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:32.324+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1867646848 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:32.324+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:32.324+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:32.325+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:32.325+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1867646848 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:32.326+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1867646848 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:34.346+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:34.347+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1890608528 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:34.347+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1890608528 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:34.348+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:34.349+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:34.349+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:34.351+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:34.351+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1890608528 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:34.352+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1890608528 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:34.352+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:34.352+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@742589458 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:34.352+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@742589458 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:34.353+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:34.353+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:34.354+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:34.354+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@742589458 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:34.355+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@742589458 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:36.369+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:36.369+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1420669155 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:36.369+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1420669155 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:36.370+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:36.370+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:36.370+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:36.372+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:36.372+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1420669155 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:36.372+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1420669155 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:36.372+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:36.372+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@491800236 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:36.372+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@491800236 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:36.372+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:36.372+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:36.373+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:36.373+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@491800236 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:36.374+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@491800236 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:38.390+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:38.391+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@55341913 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:38.391+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@55341913 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:38.392+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:38.392+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:38.392+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:38.396+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:38.396+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@55341913 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:38.397+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@55341913 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:38.397+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:38.397+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@896581262 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:38.397+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@896581262 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:38.398+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:38.398+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:38.399+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:38.399+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@896581262 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:38.400+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@896581262 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:40.416+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:40.416+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1559584683 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:40.417+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1559584683 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:40.417+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:40.417+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:40.417+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:40.419+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:40.419+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1559584683 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:40.420+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1559584683 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:40.420+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:40.420+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1314222529 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:40.420+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1314222529 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:40.421+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:40.421+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:40.423+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:40.423+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1314222529 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:40.424+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1314222529 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:42.443+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:42.443+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1962235451 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:42.443+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1962235451 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:42.444+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:42.444+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:42.444+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:42.447+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:42.447+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1962235451 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:42.448+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1962235451 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:42.448+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:42.448+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@732898760 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:42.448+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@732898760 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:42.449+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:42.449+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:42.450+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:42.451+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@732898760 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:42.451+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@732898760 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:44.474+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:44.475+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2030344210 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:44.475+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2030344210 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:44.477+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:44.477+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:44.477+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:44.479+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:44.479+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2030344210 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:44.479+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2030344210 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:44.480+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:44.480+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@183069817 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:44.480+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@183069817 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:44.480+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:44.480+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:44.482+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:44.482+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@183069817 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:44.483+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@183069817 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:46.501+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:46.502+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@449178912 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:46.502+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@449178912 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:46.503+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:46.503+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:46.503+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:46.504+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:46.505+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@449178912 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:46.505+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@449178912 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:46.506+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:46.506+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@639784656 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:46.506+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@639784656 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:46.506+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:46.506+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:46.508+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:46.508+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@639784656 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:46.508+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@639784656 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:48.531+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:48.532+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@666367927 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:48.532+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@666367927 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:48.533+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:48.533+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:48.533+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:48.535+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:48.535+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@666367927 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:48.535+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@666367927 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:48.536+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:48.536+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1466810139 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:49:48.536+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1466810139 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:49:48.536+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:48.536+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:48.538+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:48.538+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1466810139 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:49:48.539+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1466810139 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:49:50.556+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:50.556+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@552916243 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:50.556+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@552916243 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:50.557+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:50.557+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:50.557+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:50.558+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:50.558+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@552916243 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:50.558+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@552916243 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:50.558+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:50.558+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@637294578 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:50.558+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@637294578 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:50.558+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:50.559+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:50.559+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:50.559+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@637294578 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:50.560+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@637294578 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:52.575+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:52.575+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1192311691 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:52.575+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1192311691 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:52.576+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:52.576+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:52.576+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:52.578+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:52.578+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1192311691 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:52.578+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1192311691 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:52.578+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:52.578+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@735276867 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:52.578+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@735276867 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:52.579+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:52.579+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:52.581+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:52.581+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@735276867 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:52.581+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@735276867 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:54.603+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:54.604+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@316809676 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:54.604+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@316809676 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:54.605+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:54.605+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:54.605+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:54.607+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:54.607+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@316809676 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:54.607+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@316809676 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:54.608+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:54.608+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1026786803 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:49:54.608+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1026786803 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:49:54.608+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:54.608+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:54.609+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:54.609+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1026786803 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:49:54.610+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1026786803 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:49:56.629+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:56.630+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@90312001 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:56.630+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@90312001 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:56.631+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:56.631+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:56.631+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:56.633+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:56.633+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@90312001 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:56.633+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@90312001 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:56.634+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:56.634+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1955007965 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:49:56.634+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1955007965 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:49:56.634+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:56.634+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:56.635+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:56.636+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1955007965 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:49:56.636+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1955007965 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:49:58.653+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:58.654+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1243089489 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:58.654+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1243089489 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:58.655+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:49:58.655+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:58.655+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:49:58.657+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:58.657+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1243089489 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:58.658+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1243089489 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:49:58.658+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:49:58.658+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@528493448 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:49:58.658+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@528493448 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:49:58.658+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:49:58.658+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:49:58.660+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:49:58.660+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@528493448 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:49:58.662+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@528493448 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:00.680+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:00.681+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@173017755 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:00.681+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@173017755 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:00.682+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:00.682+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:00.682+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:00.683+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:00.683+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@173017755 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:00.684+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@173017755 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:00.685+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:00.685+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1224556286 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:00.685+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1224556286 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:00.685+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:00.685+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:00.687+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:00.687+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1224556286 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:00.688+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1224556286 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:02.709+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:02.709+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@813129222 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:02.709+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@813129222 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:02.710+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:02.710+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:02.710+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:02.712+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:02.712+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@813129222 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:02.712+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@813129222 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:02.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:02.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1026121563 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:02.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1026121563 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:02.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:02.713+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:02.715+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:02.715+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1026121563 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:02.715+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1026121563 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:04.732+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:04.733+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1346681743 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:50:04.733+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1346681743 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:50:04.734+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:04.734+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:04.734+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:04.736+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:04.736+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1346681743 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:50:04.737+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1346681743 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:04.737+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:04.737+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@199778873 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:50:04.737+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@199778873 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:50:04.738+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:04.738+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:04.739+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:04.739+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@199778873 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:50:04.740+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@199778873 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:06.758+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:06.760+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@348718988 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:06.760+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@348718988 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:06.760+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:06.761+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:06.761+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:06.763+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:06.763+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@348718988 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:06.764+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@348718988 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:06.764+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:06.764+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1201126135 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:06.764+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1201126135 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:06.765+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:06.765+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:06.767+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:06.768+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1201126135 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:06.769+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1201126135 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:08.788+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:08.789+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@547114570 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:08.789+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@547114570 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:08.790+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:08.790+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:08.790+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:08.792+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:08.792+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@547114570 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:08.793+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@547114570 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:08.793+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:08.793+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1461542362 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:08.793+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1461542362 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:08.793+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:08.793+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:08.795+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:08.795+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1461542362 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:08.795+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1461542362 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:10.816+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:10.817+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@854581861 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:10.817+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@854581861 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:10.818+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:10.818+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:10.818+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:10.826+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:10.826+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@854581861 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:10.828+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@854581861 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:10.828+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:10.828+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1694155993 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:10.828+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1694155993 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:10.829+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:10.829+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:10.830+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:10.831+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1694155993 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:10.831+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1694155993 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:12.850+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:12.851+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@635914787 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:12.851+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@635914787 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:12.852+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:12.852+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:12.852+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:12.853+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:12.853+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@635914787 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:12.854+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@635914787 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:12.854+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:12.854+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1448918081 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:12.854+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1448918081 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:12.854+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:12.855+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:12.856+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:12.856+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1448918081 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:12.857+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1448918081 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:14.878+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:14.879+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1949664955 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:14.879+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1949664955 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:14.879+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:14.879+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:14.879+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:14.882+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:14.882+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1949664955 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:14.883+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1949664955 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:14.883+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:14.883+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@483137057 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:14.883+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@483137057 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:14.884+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:14.884+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:14.885+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:14.886+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@483137057 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:14.887+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@483137057 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:16.903+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:16.903+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1488186595 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:16.903+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1488186595 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:16.904+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:16.904+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:16.904+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:16.905+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:16.905+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1488186595 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:16.906+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1488186595 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:16.906+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:16.906+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@582473614 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:16.906+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@582473614 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:16.906+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:16.906+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:16.907+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:16.907+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@582473614 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:16.907+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@582473614 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:18.921+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:18.922+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1071117670 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:50:18.922+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1071117670 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:50:18.922+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:18.923+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:18.923+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:18.925+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:18.925+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1071117670 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:50:18.926+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1071117670 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:18.926+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:18.926+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1685983329 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:50:18.926+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1685983329 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:50:18.926+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:18.926+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:18.928+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:18.928+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1685983329 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:50:18.929+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1685983329 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:20.951+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:20.952+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@325119630 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:20.952+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@325119630 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:20.952+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:20.952+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:20.953+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:20.954+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:20.954+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@325119630 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:20.955+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@325119630 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:20.955+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:20.955+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@136975708 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:20.955+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@136975708 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:20.955+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:20.955+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:20.957+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:20.957+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@136975708 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:20.958+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@136975708 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:22.980+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:22.980+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1661216332 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:22.981+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1661216332 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:22.981+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:22.981+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:22.981+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:22.983+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:22.983+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1661216332 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:22.984+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1661216332 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:22.984+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:22.984+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@988142288 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:22.984+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@988142288 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:22.984+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:22.985+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:22.986+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:22.986+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@988142288 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:22.987+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@988142288 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:25.007+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:25.008+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1346927549 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:50:25.008+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1346927549 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:50:25.009+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:25.009+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:25.009+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:25.011+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:25.011+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1346927549 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:50:25.012+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1346927549 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:25.012+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:25.012+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@845595443 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:50:25.012+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@845595443 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:50:25.013+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:25.013+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:25.014+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:25.014+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@845595443 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:50:25.015+06:00 DEBUG 72791 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@845595443 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:27.031+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:27.032+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1894218216 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:27.032+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1894218216 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:27.033+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:27.033+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:27.033+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:27.035+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:27.035+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1894218216 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:27.036+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1894218216 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:27.036+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:27.036+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@899780058 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:27.036+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@899780058 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:27.037+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:27.037+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:27.038+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:27.038+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@899780058 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:27.039+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@899780058 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:29.057+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:29.058+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@81637949 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:29.058+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@81637949 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:29.059+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:29.059+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:29.059+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:29.062+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:29.062+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@81637949 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:29.063+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@81637949 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:29.063+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:29.063+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1691012061 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:29.063+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1691012061 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:29.064+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:29.064+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:29.066+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:29.066+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1691012061 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:29.067+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1691012061 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:31.089+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:31.090+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@782234825 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:31.090+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@782234825 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:31.091+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:31.092+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:31.092+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:31.094+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:31.094+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@782234825 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:31.095+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@782234825 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:31.095+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:31.095+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1578269886 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:31.095+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1578269886 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:31.095+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:31.095+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:31.097+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:31.097+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1578269886 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:31.098+06:00 DEBUG 72791 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1578269886 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:33.123+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:33.124+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@666691094 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:33.124+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@666691094 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:33.125+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:33.125+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:33.125+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:33.127+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:33.127+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@666691094 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:33.128+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@666691094 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:33.128+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:33.128+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@596461391 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:50:33.128+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@596461391 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:50:33.129+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:33.129+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:33.131+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:33.131+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@596461391 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:50:33.132+06:00 DEBUG 72791 --- [nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@596461391 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:50:35.148+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:35.149+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@678522811 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:35.149+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@678522811 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:35.150+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:35.150+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:35.150+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:35.152+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:35.152+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@678522811 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:35.153+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@678522811 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:35.153+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:35.153+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@590384909 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:35.153+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@590384909 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:35.154+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:35.154+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:35.156+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:35.156+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@590384909 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:35.156+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@590384909 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:37.180+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:37.180+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@896529503 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:37.181+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@896529503 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:37.181+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:37.181+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:37.181+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:37.184+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:37.184+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@896529503 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:37.185+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@896529503 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:37.185+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:37.185+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2008063886 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:37.185+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2008063886 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:37.186+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:37.186+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:37.187+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:37.187+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2008063886 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:37.188+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2008063886 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:39.203+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:39.204+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1385944614 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:50:39.204+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1385944614 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:50:39.204+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:39.204+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:39.204+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:39.205+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:39.205+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1385944614 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:50:39.206+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1385944614 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:39.206+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:39.206+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1836405966 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:50:39.206+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1836405966 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:50:39.206+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:39.206+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:39.207+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:39.207+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1836405966 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:50:39.207+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1836405966 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:50:41.224+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:41.224+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@165099357 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:41.224+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@165099357 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:41.225+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:41.225+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:41.225+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:41.227+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:41.228+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@165099357 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:41.228+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@165099357 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:41.229+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:41.229+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@601229037 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:50:41.229+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@601229037 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:50:41.229+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:41.229+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:41.231+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:41.231+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@601229037 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:50:41.231+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@601229037 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:50:43.253+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:43.253+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@872474839 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:43.253+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@872474839 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:43.254+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:50:43.254+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:43.254+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:50:43.256+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:43.256+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@872474839 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:43.256+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@872474839 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:50:43.256+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:50:43.256+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2001988547 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:50:43.256+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2001988547 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:50:43.257+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:50:43.257+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:50:43.259+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:50:43.259+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2001988547 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:50:43.259+06:00 DEBUG 72791 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2001988547 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
Client disconnected: e9f005a2-0c50-4ac5-b3f9-b993953738f0
Client connected: e40face4-f697-42f9-bd3b-839107357812
Client connected: e40face4-f697-42f9-bd3b-839107357812
Client e40face4-f697-42f9-bd3b-839107357812 joining trip: 3
2025-10-08T16:51:00.789+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:00.789+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1088774986 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:51:00.789+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1088774986 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:51:00.790+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:00.790+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:51:00.790+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.791+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:51:00.791+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1203227761 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:51:00.791+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1203227761 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:51:00.791+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.791+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:51:00.793+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:00.793+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:00.793+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1088774986 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:51:00.793+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1203227761 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1203227761 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.TripService.getTripById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@630073538 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] for JDBC transaction
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@630073538 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] to manual commit
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1088774986 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*,
       d.destination_name as destination_name,
       u.first_name as creator_first_name,
       u.last_name as creator_last_name
FROM trips t
LEFT JOIN destinations d ON t.destination_id = d.destination_id
LEFT JOIN users u ON t.creator_user_id = u.user_id
WHERE t.trip_id = ?
]
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1161766634 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:51:00.794+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1161766634 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:51:00.795+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.795+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:51:00.795+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.796+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:51:00.797+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:00.797+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1161766634 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:51:00.797+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.797+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT sd.*, ts.estimated_cost, ts.status, ts.notes, d.destination_name
FROM trip_subdestinations ts
JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
JOIN destinations d ON sd.destination_id = d.destination_id
WHERE ts.trip_id = ?
ORDER BY sd.sub_destination_name
]
2025-10-08T16:51:00.797+06:00 DEBUG 72791 --- [nio-8080-exec-7] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1161766634 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:51:00.798+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.798+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT a.*, ta.check_in_date, ta.check_out_date, ta.number_of_rooms,
       ta.room_type, ta.total_cost, ta.booking_status, ta.booking_reference,
       ta.special_requests, d.destination_name
FROM trip_accommodations ta
JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
JOIN destinations d ON a.destination_id = d.destination_id
WHERE ta.trip_id = ?
ORDER BY a.accommodation_name
]
2025-10-08T16:51:00.800+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.800+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT t.*, tt.journey_type, tt.travel_date, tt.departure_time as trip_departure_time,
       tt.arrival_time as trip_arrival_time, tt.number_of_passengers, tt.seat_preference,
       tt.total_cost, tt.booking_status, tt.booking_reference, d.destination_name
FROM trip_transport tt
JOIN transport t ON tt.transport_id = t.transport_id
JOIN destinations d ON t.destination_id = d.destination_id
WHERE tt.trip_id = ?
ORDER BY t.transport_type, t.operator_name
]
2025-10-08T16:51:00.802+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.802+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT * FROM trip_expenses
WHERE trip_id = ?
ORDER BY expense_date DESC, created_at DESC
]
2025-10-08T16:51:00.803+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.803+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM trip_members WHERE trip_id = ?]
2025-10-08T16:51:00.805+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:00.805+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT
    COALESCE(SUM(te.amount), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN ta.total_cost IS NOT NULL THEN ta.total_cost
        ELSE a.price_per_night * GREATEST(ta.number_of_rooms, 1) * 7
    END) FROM trip_accommodations ta
    JOIN accommodations a ON ta.accommodation_id = a.accommodation_id
    WHERE ta.trip_id = ?), 0) +
    COALESCE((SELECT SUM(CASE
        WHEN tt.total_cost IS NOT NULL THEN tt.total_cost
        ELSE t.price * GREATEST(tt.number_of_passengers, 1)
    END) FROM trip_transport tt
    JOIN transport t ON tt.transport_id = t.transport_id
    WHERE tt.trip_id = ?), 0) +
    COALESCE((SELECT SUM(COALESCE(ts.estimated_cost, sd.entry_fee, 0))
    FROM trip_subdestinations ts
    JOIN sub_destinations sd ON ts.sub_destination_id = sd.sub_destination_id
    WHERE ts.trip_id = ?), 0) as total_cost
FROM trip_expenses te
WHERE te.trip_id = ?
]
2025-10-08T16:51:00.807+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:00.807+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@630073538 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064]
2025-10-08T16:51:00.808+06:00 DEBUG 72791 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@630073538 wrapping com.mysql.cj.jdbc.ConnectionImpl@42781064] after transaction
2025-10-08T16:51:02.816+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:02.817+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@856529300 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:51:02.817+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@856529300 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:51:02.818+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:51:02.818+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:02.819+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:51:02.821+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:02.821+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@856529300 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:51:02.822+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@856529300 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:51:02.822+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:02.822+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1021467040 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:51:02.822+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1021467040 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:51:02.823+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:02.823+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:51:02.825+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:02.825+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1021467040 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:51:02.826+06:00 DEBUG 72791 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1021467040 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:51:04.844+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:04.844+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1645667609 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:51:04.845+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1645667609 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:51:04.845+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:51:04.845+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:04.845+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:51:04.847+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:04.847+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1645667609 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:51:04.848+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1645667609 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:51:04.848+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:04.848+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2126623165 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] for JDBC transaction
2025-10-08T16:51:04.848+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2126623165 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] to manual commit
2025-10-08T16:51:04.848+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:04.848+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:51:04.850+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:04.850+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2126623165 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251]
2025-10-08T16:51:04.851+06:00 DEBUG 72791 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2126623165 wrapping com.mysql.cj.jdbc.ConnectionImpl@252f4251] after transaction
2025-10-08T16:51:06.875+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:06.876+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@535476615 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:51:06.876+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@535476615 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:51:06.876+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:51:06.876+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:06.876+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:51:06.878+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:06.878+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@535476615 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:51:06.879+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@535476615 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:51:06.880+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:06.880+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1363874192 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] for JDBC transaction
2025-10-08T16:51:06.880+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1363874192 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] to manual commit
2025-10-08T16:51:06.880+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:06.880+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:51:06.882+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:06.882+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1363874192 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008]
2025-10-08T16:51:06.883+06:00 DEBUG 72791 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1363874192 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bdd3008] after transaction
2025-10-08T16:51:08.906+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.isUserTripMember]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:08.907+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2000273174 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:51:08.907+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@2000273174 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:51:08.908+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Participating in existing transaction
2025-10-08T16:51:08.908+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:08.908+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT tm.*,
       u.first_name as user_first_name,
       u.last_name as user_last_name,
       u.email as user_email,
       u.profile_picture_url as user_profile_picture,
       inv.first_name as inviter_first_name,
       inv.last_name as inviter_last_name
FROM trip_members tm
LEFT JOIN users u ON tm.user_id = u.user_id
LEFT JOIN users inv ON tm.invited_by = inv.user_id
WHERE tm.trip_id = ?
ORDER BY tm.invited_at
]
2025-10-08T16:51:08.910+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:08.911+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2000273174 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:51:08.912+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2000273174 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
2025-10-08T16:51:08.912+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.porikroma.service.ChatService.getTripMessages]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-10-08T16:51:08.912+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1793367700 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] for JDBC transaction
2025-10-08T16:51:08.912+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1793367700 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] to manual commit
2025-10-08T16:51:08.913+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-10-08T16:51:08.913+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT m.*, u.first_name, u.last_name, u.profile_picture_url,
       rm.content as reply_content, ru.first_name as reply_sender_name
FROM trip_messages m
LEFT JOIN users u ON m.sender_user_id = u.user_id
LEFT JOIN trip_messages rm ON m.reply_to_message_id = rm.message_id
LEFT JOIN users ru ON rm.sender_user_id = ru.user_id
WHERE m.trip_id = ?
ORDER BY m.created_at ASC
]
2025-10-08T16:51:08.916+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-10-08T16:51:08.916+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1793367700 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e]
2025-10-08T16:51:08.917+06:00 DEBUG 72791 --- [nio-8080-exec-2] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1793367700 wrapping com.mysql.cj.jdbc.ConnectionImpl@47529e3e] after transaction
Client disconnected: e40face4-f697-42f9-bd3b-839107357812
2025-10-08T16:51:14.548+06:00  INFO 72791 --- [ionShutdownHook] c.c.socketio.SocketIOServer              : SocketIO server stopped
2025-10-08T16:51:14.552+06:00  INFO 72791 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-08T16:51:14.563+06:00  INFO 72791 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
